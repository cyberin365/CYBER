## OSI Model
- physical
	- electrical (copper twisted pair), light (fiber optic mmf or smf), or radio waves (wireless 2.4ghz or 5ghz)
	- hubs and repeaters
	- testing cables
	- loopback tests on NICs
	- PDU: bit
- data link
	- network cards, ethernet adapters, wifi adapters
	- PDU: frame (add source and dest mac address)
	- functions
		- flow control - simple pause
		- error detection - cyclic redundnacy check (crc). if fail, just discard, doesnt request retransmission
		- de-multiplex between ipv4 or ipv6 packet, direct to correct protocol handler
	- MAC addresses
		- 48 bit
		- only for devices on ethernet/wifi
		- only affects how a device is seen by other devices on same local network
	- EUI-48/EUI-64
		- any object including bluetooth and even software
		- *first 3 bytes / first 24 bits = manufacturer*
		- *last 3 bytes / last 24 bits = assigned by manufacturer* 
- network
	- routers
	- PDU: packet (add ip addresses)
	- functions
		- fragmentation - if exceeds maximum transmission unit (mtu)
	- protocols
		- IP - main protocol. connectionless
		- ICMP - error messages, like ping
		- ARP - address resolution protocol. turns ip addresses on same network into mac addresses.
- transport
	- protocol: tcp or udp
	- PDU: segment (tcp) datagram (udp) 
	- functions
		- flow control - sliding window protocol - telling sender to adjust transmission rate accordingly
		- error detection - tcp. checksum and ACKs. if fail, request a retransmit
		- multiplexing (adding port numbers on way out to router) and demultiplexing (direct data to right application based on port)
- session
	- controls when communication starts, stops, ends
	- modern: most functions have been absorbed into application and transport layer
	- misc functions:
		- checkpointing in large downloads
		- maintains state after authentication so dont have to re-login on every page, session stays open
- presentation 
	- â€‹puts data into format for application
		- character encoding
		- application encryption
	- layer where encryption and decryption occur (examples: SSL, TLS, HTTPS)
	- layer where compression and decompression occur
- application layer
	- many protocols: HTTP, FTP, DNS, POP3, etc

## Networking Devices
- Outoing traffic:
	- Client -> forward proxy -> firewall -> IDS/IPS -> router -> internet
	- Server -> load balancer -> IDS/IPS -> firewall -> router -> internet
- Incoming traffic:
	- Internet -> router -> firewall -> IPS/IDS -> load balancer -> server
- Firewall
	- traditional works by TCP or UDP port
	- NGFW (next generation firewall) - firewalls by application. 2 firewalls can create an encypted tunnel between eahc other via VPN
		- most firewalls can also be layer 3 devices AKA router.
- Load balancer
	- TCP offload - instead of asking servers to do administrative work of TCP syn, synack, ack, the load balancer does it iself
	- SSL offload - instead of asking servers to do encryption and decryption of SSL/TSL, load balancer does it itself
	- Caching - frequent request arent sent to servers (like static content), but cached at the load balancer itself for quick responses
	- QoS - prioritizing certain traffic over others (either based on source or traffic type)
	- Content Switching - load balancer keeps track of which content is on which server. ex all image requests go to server A, all database queries go to server B.
- Proxies
	- for outgoing requests, perform a request on behalf othe client. 
	- cache results from the internet
	- url filtering and content scanning to block some content from the user
- Network Attached Storage (NAS)
	- file-level access - if you want to edit a file, need to download whole file to client, the write whole file back
- Storage Area Netowkr (SAN)
	- block-level access - only need to edit certain blocks
- Access points
	- translates between 802.3 ethernet and 802.11 wifi
	- wireless LAN controller - manages all WAPs centrally, has performance and security monitoring, can deploy changes to all WAPs at once

## Networking Functions
- Content Delivery Network (CDN)
	- geographically distributed caches of duplicated data.
- VPN
	- encrypted communication across a insecure public network
	- concentrator - encryption/decryption device. sometimes separate hardware, sometimes built into firewall
- QoS
	- prioritize traffic by application (voice call over file download), or user
	- can be done at firewall, router, or switch
- TTL time to live
	- ipv4 TTL - prevents inadvertent router loop
		- *macos/linux default 64 hops*
		- *windows default 128 hops*
		- for most internet, need about 12-16 hops, so safe limit
	- DNS TTL - DNS tells your computer how long to keep this DNS lookup record

## ipv4 header
- version - always 4
- *header length - min 5 (i.e. 20 bytes), max 15 (i.e. 60 bytes)*
- QoS type
- total packet length
- identification - this is a fragment from original IP packet N
- flags - dont fragment / more fragments indicators
- fragment offset - position of this fragment relative to original IP packet
- time to live - prevent looping
- *protocol - 6 for tcp, 17 for udp*
- header checksum - error detection. if this fails, discards the packet
- source and destination IP

## Cloud
- virtual private cloud, connected via transit gateways (like a router for cloud networks)
- vpc NAT gateway (to connect private cloud subnets to external intenret)
- vpc endpoint (connect networks on different cloud vendors)
- network security list (choose what ports, inbound/outbound, and from what ip addresses are allowed to talk to your cloud network)
- network security group (more granularity on security rules to apply to groups of subnets)
- models
	- software-as-a-service - on-demand software. no installation, just log in. 
	- HaaS/IaaS - example: web server providers. customers rent servers, but have to do OS themselves, netwroking themselves
	- PaaS - middle ground (ex. salesforce)

## Internet Protocol
- in TCP, SYN-SYNACK-ACK is performed once per session
- in UDP, no flow control. cant say "slow down"
- on server side, usually used non-epehemeral ports (i.e. HTTP is awlays 80). on client side, use temporary/ephemeral ports.
- *max port number: 65,535*
- FTP control - tcp/21
- FTP data - tcp/20
- SSH - tcp/22